<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">

<!-- basic building blocks -->

<xacro:macro name="box_link" params="name mass x y z material:=red origin_position:='0 0 0' origin_orientation:='0 0 0'">

    <link name="${name}">
        <inertial>
            <mass value="${mass}" />
            <inertia ixx="${(1/12) * mass * (y*y+z*z)}" ixy="0.0" ixz="0.0"
                     iyy="${(1/12) * mass * (x*x+z*z)}" iyz="0.0"
                     izz="${(1/12) * mass * (x*x+y*y)}" />
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </inertial>
        <visual>
            <geometry>
                <box size="${x} ${y} ${z}"/>
            </geometry>
            <material name="${material}"/>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </visual>
        <collision>
            <geometry>
                <box size="${x} ${y} ${z}"/>
            </geometry>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </collision>
    </link>

</xacro:macro>

<xacro:macro name="cylinder_link" params="name mass radius length material:=red origin_position:='0 0 0' origin_orientation:='0 0 0'">
  
    <link name="${name}">
        <inertial>
            <mass value="${mass}" />
            <inertia ixx="${(1/12) * mass * (3*radius*radius + length*length)}" ixy="0.0" ixz="0.0"
                     iyy="${(1/12) * mass * (3*radius*radius + length*length)}" iyz="0.0"
                     izz="${(1/2) * mass * (radius*radius)}" />
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </inertial>
        <visual>
            <geometry>
                <cylinder radius="${radius}" length="${length}"/>
            </geometry>
            <material name="${material}"/>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="${radius}" length="${length}"/>
            </geometry>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </collision>
    </link>

</xacro:macro>

<xacro:macro name="ball_link" params="name mass radius material:=red origin_position:='0 0 0' origin_orientation:='0 0 0'">

    <link name="${name}">
        <inertial>
            <mass value="${mass}"/>
            <inertia 
                ixx="0.002" ixy="0.0" ixz="0.0"
                iyy="0.002" iyz="0.0"
                izz="0.002"/>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </inertial>
        <visual>
            <geometry>
                <sphere radius="${radius}"/>
            </geometry>
            <material name="${material}"/>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </visual>
        <collision>
            <geometry>
                <sphere radius="${radius}"/>
            </geometry>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </collision>
    </link>

</xacro:macro>

<xacro:macro name="mesh_link" params="name package file material:=red scale:=0.001 origin_position:='0 0 0' origin_orientation:='0 0 0' mass:=0.020">

    <link name="${name}">
        <inertial>
            <mass value="${mass}" />
            <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                     iyy="0.0" iyz="0.0"
                     izz="0.0" />
        </inertial>

        <visual>
            <geometry>
                <mesh filename="file://$(find ${package})/${file}" scale="${scale} ${scale} ${scale}"/>
            </geometry>
            <material name="${material}"/>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </visual>

        <collision>
            <geometry>
                <mesh filename="file://$(find ${package})/${file}" scale="${scale} ${scale} ${scale}"/>
            </geometry>
            <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        </collision>
    </link>

</xacro:macro>

<xacro:macro name="fixed_joint" params="name parent child origin_position:='0 0 0' origin_orientation:='0 0 0'">

    <joint name="${name}" type="fixed">
        <parent link="${parent}"/>
        <child link="${child}"/>
        <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
    </joint>

</xacro:macro>

<xacro:macro name="continuous_joint" params="name parent child origin_position:='0 0 0' origin_orientation:='0 0 0' axis='0 0 0'">
    
    <joint name="${name}" type="continuous">
        <parent link="${parent}"/>
        <child link="${child}"/>
        <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        <axis xyz="${axis}"/>
    </joint>

</xacro:macro>

<xacro:macro name="revolute_joint" params="name parent child origin_position:='0 0 0' origin_orientation:='0 0 0' axis='0 0 0' limit_lower:=-3.14 limit_upper:=3.14 effort:=10 velocity:=3.14">
    
    <joint name="${name}" type="revolute">
        <parent link="${parent}"/>
        <child link="${child}"/>
        <origin xyz="${origin_position}" rpy="${origin_orientation}"/>
        <axis xyz="${axis}"/>
        <limit lower="${limit_lower}" upper="${limit_upper}" effort="${effort}" velocity="${velocity}"/>
    </joint>

</xacro:macro>

</robot>
